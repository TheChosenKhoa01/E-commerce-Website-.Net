 @using DoAnCuoiKy.Models;

 @model List<ItemGioHang>

@{
    ViewBag.Title = "XemGioHang";
    Layout = "~/Views/Layout/ProductLayout.cshtml";
}
@if (Model == null || Model.Count==0)
{ 
    <h1 style="color:#000;">Giỏ hàng rỗng!</h1>
}
else
{
    decimal TongTien = 0; 
    <table class="table">
        <tr>
            <td>Mã SP</td>
            <td>Tên SP</td>
            <td>Hình ảnh</td>
            <td>Số lượng</td>
            <td>Đơn giá</td>
            <td>Thành tiền</td>
        </tr>
       
       @foreach (var item in Model)
       { 
        <tr>
            <td>@item.MaSP</td>
            <td>@item.TenSP</td>
            <td><img src="@Url.Content("~/Content/HinhAnhSP/"+item.HinhAnh)" width="50" height="50"/></td>          
            <td>@item.SoLuong</td>
            <td>@item.DonGia.ToString("#,##") đồng</td>
            <td>@item.ThanhTien.ToString("#,##") đồng</td>
            @{ TongTien += item.ThanhTien;}
            <td>@Html.ActionLink("Sửa","SuaGioHang", new {@MaSP = item.MaSP})
                @Html.ActionLink("Xóa", "XoaGioHang", new { @MaSP = item.MaSP })
            </td> 
        </tr>       
       }

    </table>
    <input type="hidden" id="tongtien" value="@Url.Content(TongTien.ToString("#,##"))" />

  using (Html.BeginForm("DatHang", "GioHang"))
                {
      <div class="divDatHang" style="text-align:right;">
            <input type="submit" value="Đặt hàng" class="btn btn-danger" id="btnDatHang" />
            <a class="btn btn-success" href="@Url.Action("Index","Home")">Mua Tiếp</a>          
        </div>
    }               
}
        <style>
            input[type="submit"] {
                padding: 7px;
                margin:0;
            }
        </style>

     <script>
         $("#btnDatHang").click(function () {
             var tong = $("#tongtien").val();
             var thongbao = "Tổng Số Tiền Là: " + tong + " đồng \n Bạn Còn Muốn Tiếp Tục Mua Hàng?";
             
             var result = confirm(thongbao);

                 if (result) {
                     return false;
                 } else {
                     alert("Thông tin về đơn hàng sẽ được gửi đến gmail của bạn");
                    
                 }              
             });
     </script>